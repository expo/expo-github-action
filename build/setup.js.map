{"version":3,"sources":["/Users/cedric/Projects/expo/expo-github-action/src/cache.ts","/Users/cedric/Projects/expo/expo-github-action/src/install.ts","/Users/cedric/Projects/expo/expo-github-action/src/packager.ts","/Users/cedric/Projects/expo/expo-github-action/src/tools.ts","/Users/cedric/Projects/expo/expo-github-action/src/actions/setup.ts"],"sourcesContent":["import { ReserveCacheError, restoreCache, saveCache } from '@actions/cache';\nimport * as core from '@actions/core';\nimport * as toolCache from '@actions/tool-cache';\nimport path from 'path';\nimport os from 'os';\n\nimport type { InstallConfig } from './install';\n\nexport type CacheConfig = Omit<InstallConfig, 'cache'>;\n\n/**\n * Get the path to the `expo-cli` from cache, if any.\n * Note, this cache is **NOT** shared between jobs.\n *\n * @see https://github.com/actions/toolkit/issues/47\n */\nexport async function fromLocalCache(config: CacheConfig): Promise<string | undefined> {\n  return toolCache.find(config.package, config.version);\n}\n\n/**\n * Store the root of `expo-cli` in the cache, for future reuse.\n * Note, this cache is **NOT** shared between jobs.\n *\n * @see https://github.com/actions/toolkit/issues/47\n */\nexport async function toLocalCache(root: string, config: CacheConfig): Promise<string> {\n  return toolCache.cacheDir(root, config.package, config.version);\n}\n\n/**\n * Download the remotely stored `expo-cli` from cache, if any.\n * Note, this cache is shared between jobs.\n */\nexport async function fromRemoteCache(config: CacheConfig): Promise<string | undefined> {\n  // see: https://github.com/actions/toolkit/blob/8a4134761f09d0d97fb15f297705fd8644fef920/packages/tool-cache/src/tool-cache.ts#L401\n  const target = path.join(process.env['RUNNER_TOOL_CACHE'] || '', config.package, config.version, os.arch());\n  const cacheKey = config.cacheKey || getRemoteKey(config);\n\n  try {\n    // When running with nektos/act, or other custom environments, the cache might not be set up.\n    const hit = await restoreCache([target], cacheKey);\n    if (hit) {\n      return target;\n    }\n  } catch (error) {\n    if (!handleRemoteCacheError(error)) {\n      throw error;\n    }\n  }\n}\n\n/**\n * Store the root of `expo-cli` in the remote cache, for future reuse.\n * Note, this cache is shared between jobs.\n */\nexport async function toRemoteCache(source: string, config: CacheConfig): Promise<void> {\n  const cacheKey = config.cacheKey || getRemoteKey(config);\n\n  try {\n    await saveCache([source], cacheKey);\n  } catch (error) {\n    if (!handleRemoteCacheError(error)) {\n      throw error;\n    }\n  }\n}\n\n/**\n * Get the cache key to use when (re)storing the Expo CLI from remote cache.\n */\nfunction getRemoteKey(config: Omit<CacheConfig, 'cacheKey'>): string {\n  return `${config.package}-${process.platform}-${os.arch()}-${config.packager}-${config.version}`;\n}\n\n/**\n * Handle any incoming errors from cache methods.\n * This can include actual errors like `ReserveCacheErrors` or unavailability errors.\n * When the error is handled, it MUST provide feedback for the developer.\n *\n * @returns If the error was handled properly.\n */\nfunction handleRemoteCacheError(error: Error): boolean {\n  const isReserveCacheError = error instanceof ReserveCacheError;\n  const isCacheUnavailable = error.message.toLowerCase().includes('cache service url not found');\n\n  if (isReserveCacheError || isCacheUnavailable) {\n    core.warning('Skipping remote cache storage, encountered error:');\n    core.warning(error.message);\n    return true;\n  }\n\n  return false;\n}\n","import * as core from '@actions/core';\nimport * as cli from '@actions/exec';\nimport * as io from '@actions/io';\nimport * as path from 'path';\n\nimport { fromLocalCache, fromRemoteCache, toLocalCache, toRemoteCache } from './cache';\nimport { PackageName } from './tools';\n\nexport type InstallConfig = {\n  /** The exact version to install */\n  version: string;\n  /** The name of the package to install */\n  package: PackageName;\n  /** The packager to install with, likely to be `yarn` or `npm` */\n  packager: string;\n  /** If remote caching is enabled or not */\n  cache?: boolean;\n  /** The custom remote cache key */\n  cacheKey?: string;\n};\n\n/**\n * Install `expo-cli`, by version, using the packager.\n * Here you can provide any semver range or dist tag used in the registry.\n * It returns the path where Expo is installed.\n */\nexport async function install(config: InstallConfig): Promise<string> {\n  let root: string | undefined = await fromLocalCache(config);\n\n  if (!root && config.cache) {\n    root = await fromRemoteCache(config);\n  } else {\n    core.info('Skipping remote cache, not enabled...');\n  }\n\n  if (!root) {\n    root = await fromPackager(config);\n    root = await toLocalCache(root, config);\n\n    if (config.cache) {\n      await toRemoteCache(root, config);\n    }\n  }\n\n  return path.join(root, 'node_modules', '.bin');\n}\n\n/**\n * Install `expo-cli`, by version, using npm or yarn.\n * It creates a temporary directory to store all required files.\n */\nexport async function fromPackager(config: InstallConfig): Promise<string> {\n  const root = process.env['RUNNER_TEMP'] || '';\n  const tool = await io.which(config.packager);\n\n  await io.mkdirP(root);\n  await cli.exec(tool, ['add', `${config.package}@${config.version}`], { cwd: root });\n\n  return root;\n}\n","import { exec } from '@actions/exec';\n\n/**\n * Resolve a package with version range to an exact version.\n * This is useful to invalidate the cache _and_ using dist-tags or version ranges.\n * It executes `npm info` and parses the latest manifest.\n */\nexport async function resolveVersion(name: string, range: string): Promise<string> {\n  let stdout = '';\n\n  try {\n    await exec('npm', ['info', `${name}@${range}`, 'version', '--json'], {\n      silent: true,\n      listeners: {\n        stdout(data) {\n          stdout += data.toString();\n        },\n      },\n    });\n  } catch (error) {\n    throw new Error(`Could not resolve version \"${range}\" of \"${name}\", reason:\\n${error.message || error}`);\n  }\n\n  // thanks npm, for returning a \"x.x.x\" json value...\n  if (stdout.startsWith('\"')) {\n    stdout = `[${stdout}]`;\n  }\n\n  return JSON.parse(stdout).at(-1);\n}\n","import * as core from '@actions/core';\nimport * as cli from '@actions/exec';\nimport semver from 'semver';\n\nimport { resolveVersion } from './packager';\n\nexport type PackageName = 'expo-cli' | 'eas-cli';\n\nexport type AuthenticateOptions = {\n  cli?: PackageName;\n  token?: string;\n  username?: string;\n  password?: string;\n};\n\n/**\n * Convert `expo-cli` or `eas-cli` to just their binary name.\n * For windows we have to use `<bin>.cmd`, toolkit will handle the Windows binary with that.\n */\nexport function getBinaryName(name: PackageName, forWindows = false): string {\n  const bin = name.toLowerCase().replace('-cli', '');\n  return forWindows ? `${bin}.cmd` : bin;\n}\n\n/**\n * Authenticate with Expo using either the token or username/password method.\n * If both of them are set, token has priority.\n */\nexport async function maybeAuthenticate(options: AuthenticateOptions = {}): Promise<void> {\n  if (options.token) {\n    if (options.cli) {\n      const bin = getBinaryName(options.cli, process.platform === 'win32');\n      await cli.exec(bin, ['whoami'], {\n        env: { ...process.env, EXPO_TOKEN: options.token },\n      });\n    } else {\n      core.info(\"Skipping token validation: no CLI installed, can't run `whoami`.\");\n    }\n\n    return core.exportVariable('EXPO_TOKEN', options.token);\n  }\n\n  if (options.username || options.password) {\n    if (options.cli !== 'expo-cli') {\n      return core.warning(\n        'Skipping authentication: only Expo CLI supports programmatic credentials, use `token` instead.'\n      );\n    }\n\n    if (!options.username || !options.password) {\n      return core.info('Skipping authentication: `username` and/or `password` not set...');\n    }\n\n    const bin = getBinaryName(options.cli, process.platform === 'win32');\n    await cli.exec(bin, ['login', `--username=${options.username}`], {\n      env: { ...process.env, EXPO_CLI_PASSWORD: options.password },\n    });\n  }\n\n  core.info('Skipping authentication: `token`, `username`, and/or `password` not set...');\n}\n\n/**\n * Try to patch the default watcher/inotify limit.\n * This is a limitation from GitHub Actions and might be an issue in some Expo projects.\n * It sets the system's `fs.inotify` limits to a more sensible setting.\n *\n * @see https://github.com/expo/expo-github-action/issues/20\n */\nexport async function maybePatchWatchers(): Promise<void> {\n  if (process.platform !== 'linux') {\n    return core.info('Skipping patch for watchers, not running on Linux...');\n  }\n\n  core.info('Patching system watchers for the `ENOSPC` error...');\n\n  try {\n    // see https://github.com/expo/expo-cli/issues/277#issuecomment-452685177\n    await cli.exec('sudo sysctl fs.inotify.max_user_instances=524288');\n    await cli.exec('sudo sysctl fs.inotify.max_user_watches=524288');\n    await cli.exec('sudo sysctl fs.inotify.max_queued_events=524288');\n    await cli.exec('sudo sysctl -p');\n  } catch {\n    core.warning(\"Looks like we can't patch watchers/inotify limits, you might encouter the `ENOSPC` error.\");\n    core.warning('For more info, https://github.com/expo/expo-github-action/issues/20');\n  }\n}\n\n/**\n * Check if there is a new major version available.\n * If there is, create a warning for people to upgrade their workflow.\n * Because this introduces additional requests, it should only be executed when necessary.\n */\nexport async function maybeWarnForUpdate(name: PackageName): Promise<void> {\n  const binaryName = getBinaryName(name);\n  const latest = await resolveVersion(name, 'latest');\n  const current = await resolveVersion(name, core.getInput(`${getBinaryName(name)}-version`) || 'latest');\n\n  if (semver.diff(latest, current) === 'major') {\n    core.warning(`There is a new major version available of the Expo CLI (${latest})`);\n    core.warning(\n      `If you run into issues, try upgrading your workflow to \"${binaryName}-version: ${semver.major(latest)}.x\"`\n    );\n  }\n}\n\n/**\n * Handle errors when this action fails, providing useful next-steps for developers.\n * This mostly checks if the installed version is the latest version.\n */\nexport async function handleError(name: PackageName, error: Error) {\n  try {\n    await maybeWarnForUpdate(name);\n  } catch {\n    // If this fails, ignore it\n  }\n\n  core.setFailed(error);\n}\n\n/**\n * Auto-execute the action if it's not running in a test environment.\n * This is useful to test the action, without running it in tests.\n * The method can also be mocked.\n */\nexport function performAction(action: () => Promise<void>) {\n  if (process.env.JEST_WORKER_ID) {\n    return Promise.resolve(null);\n  }\n\n  return action();\n}\n","import { addPath, getBooleanInput, getInput, group, info } from '@actions/core';\n\nimport { install } from '../install';\nimport { resolveVersion } from '../packager';\nimport * as tools from '../tools';\n\n// Auto-execute in GitHub actions\ntools.performAction(setupAction);\n\nexport async function setupAction(): Promise<void> {\n  const expoVersion = await installCli('expo-cli');\n  const easVersion = await installCli('eas-cli');\n\n  await group('Checking current authenticated account', () =>\n    tools.maybeAuthenticate({\n      cli: expoVersion ? 'expo-cli' : easVersion ? 'eas-cli' : undefined,\n      token: getInput('token') || undefined,\n      username: getInput('username') || undefined,\n      password: getInput('password') || undefined,\n    })\n  );\n\n  if (!getInput('patch-watchers') || getBooleanInput('patch-watchers') !== false) {\n    await group('Patching system watchers for the `ENOSPC` error', () => tools.maybePatchWatchers());\n  }\n}\n\nasync function installCli(name: tools.PackageName): Promise<string | void> {\n  const shortName = tools.getBinaryName(name);\n  const inputVersion = getInput(`${shortName}-version`);\n  const packager = getInput('packager') || 'yarn';\n\n  if (!inputVersion) {\n    return info(`Skipping installation of ${name}, \\`${shortName}-version\\` not provided.`);\n  }\n\n  const version = await resolveVersion(name, inputVersion);\n  const cache = getBooleanInput(`${shortName}-cache`);\n\n  try {\n    const path = await group(\n      cache\n        ? `Installing ${name} (${version}) from cache or with ${packager}`\n        : `Installing ${name} (${version}) with ${packager}`,\n      () =>\n        install({\n          packager,\n          version,\n          cache,\n          package: name,\n          cacheKey: getInput(`${shortName}-cache-key`) || undefined,\n        })\n    );\n\n    addPath(path);\n  } catch (error) {\n    tools.handleError(name, error);\n  }\n\n  return version;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAgBsB,cAAc,GAAd,cAAc;YAUd,YAAY,GAAZ,YAAY;YAQZ,eAAe,GAAf,eAAe;YAsBf,aAAa,GAAb,aAAa;IAxDwB,GAAgB,CAAhB,MAAgB;IAC/D,GAAI,CAAJ,IAAI;IACJ,GAAS,CAAT,SAAS;IACJ,GAAM,CAAN,KAAM;IACR,GAAI,CAAJ,GAAI;mBAYG,cAAc,CAAC,MAAmB,EAA+B,CAAC;QACtF,MAAM,CAfI,SAAS,CAeF,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO;IACtD,CAAC;mBAQqB,YAAY,CAAC,IAAY,EAAE,MAAmB,EAAmB,CAAC;QACtF,MAAM,CAzBI,SAAS,CAyBF,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO;IAChE,CAAC;mBAMqB,eAAe,CAAC,MAAmB,EAA+B,CAAC;QACvF,EAAmI,AAAnI,iIAAmI;QACnI,KAAK,CAAC,MAAM,GAjCG,KAAM,SAiCD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAmB,uBAAK,CAAE,GAAE,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,OAAO,EAhClF,GAAI,SAgCmF,IAAI;QACxG,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,YAAY,CAAC,MAAM;QAEvD,GAAG,CAAC,CAAC;YACH,EAA6F,AAA7F,2FAA6F;YAC7F,KAAK,CAAC,GAAG,GAAG,KAAK,KAzCsC,MAAgB,eAyCxC,CAAC;gBAAA,MAAM;YAAA,CAAC,EAAE,QAAQ;YACjD,EAAE,EAAE,GAAG,EACL,MAAM,CAAC,MAAM;QAEjB,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC;YACf,EAAE,GAAG,sBAAsB,CAAC,KAAK,GAC/B,KAAK,CAAC,KAAK;QAEf,CAAC;IACH,CAAC;mBAMqB,aAAa,CAAC,MAAc,EAAE,MAAmB,EAAiB,CAAC;QACvF,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,YAAY,CAAC,MAAM;QAEvD,GAAG,CAAC,CAAC;YACH,KAAK,KA5DkD,MAAgB,YA4DvD,CAAC;gBAAA,MAAM;YAAA,CAAC,EAAE,QAAQ;QACpC,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC;YACf,EAAE,GAAG,sBAAsB,CAAC,KAAK,GAC/B,KAAK,CAAC,KAAK;QAEf,CAAC;IACH,CAAC;IAED,EAEG,AAFH;;CAEG,AAFH,EAEG,UACM,YAAY,CAAC,MAAqC,EAAU,CAAC;QACpE,MAAM,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC,EApEjC,GAAI,SAoEkC,IAAI,GAAG,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO;IAChG,CAAC;IAED,EAMG,AANH;;;;;;CAMG,AANH,EAMG,UACM,sBAAsB,CAAC,KAAY,EAAW,CAAC;QACtD,KAAK,CAAC,mBAAmB,GAAG,KAAK,YAnFwB,MAAgB;QAoFzE,KAAK,CAAC,kBAAkB,GAAG,KAAK,CAAC,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,CAA6B;QAE7F,EAAE,EAAE,mBAAmB,IAAI,kBAAkB,EAAE,CAAC;YArFtC,IAAI,CAsFP,OAAO,CAAC,CAAmD;YAtFxD,IAAI,CAuFP,OAAO,CAAC,KAAK,CAAC,OAAO;YAC1B,MAAM,CAAC,IAAI;QACb,CAAC;QAED,MAAM,CAAC,KAAK;IACd,CAAC;;;;;;;YCnEqB,OAAO,GAAP,OAAO;YAyBP,YAAY,GAAZ,YAAY;IAnDtB,GAAI,CAAJ,IAAI;IACJ,GAAG,CAAH,GAAG;IACH,GAAE,CAAF,EAAE;IACF,GAAI,CAAJ,IAAI;IAE6D,GAAS,CAAT,MAAS;mBAqBhE,OAAO,CAAC,MAAqB,EAAmB,CAAC;QACrE,GAAG,CAAC,IAAI,GAAuB,KAAK,KAtBuC,MAAS,iBAsBhC,MAAM;QAE1D,EAAE,GAAG,IAAI,IAAI,MAAM,CAAC,KAAK,EACvB,IAAI,GAAG,KAAK,KAzB6D,MAAS,kBAyBrD,MAAM;aA9B3B,IAAI,CAgCP,IAAI,CAAC,CAAuC;QAGnD,EAAE,GAAG,IAAI,EAAE,CAAC;YACV,IAAI,GAAG,KAAK,CAAC,YAAY,CAAC,MAAM;YAChC,IAAI,GAAG,KAAK,KAhC6D,MAAS,eAgCxD,IAAI,EAAE,MAAM;YAEtC,EAAE,EAAE,MAAM,CAAC,KAAK,EACd,KAAK,KAnCkE,MAAS,gBAmC5D,IAAI,EAAE,MAAM;QAEpC,CAAC;QAED,MAAM,CAzCI,IAAI,CAyCF,IAAI,CAAC,IAAI,EAAE,CAAc,eAAE,CAAM;IAC/C,CAAC;mBAMqB,YAAY,CAAC,MAAqB,EAAmB,CAAC;QAC1E,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,CAAa,iBAAK,CAAE;QAC7C,KAAK,CAAC,IAAI,GAAG,KAAK,CAnDR,EAAE,CAmDU,KAAK,CAAC,MAAM,CAAC,QAAQ;QAE3C,KAAK,CArDK,EAAE,CAqDH,MAAM,CAAC,IAAI;QACpB,KAAK,CAvDK,GAAG,CAuDH,IAAI,CAAC,IAAI,EAAE,CAAC;YAAA,CAAK;eAAK,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO;QAAE,CAAC,EAAE,CAAC;YAAC,GAAG,EAAE,IAAI;QAAC,CAAC;QAElF,MAAM,CAAC,IAAI;IACb,CAAC;;;;;;;YCpDqB,cAAc,GAAd,cAAc;IAPf,GAAe,CAAf,KAAe;mBAOd,cAAc,CAAC,IAAY,EAAE,KAAa,EAAmB,CAAC;QAClF,GAAG,CAAC,MAAM,GAAG,CAAE;QAEf,GAAG,CAAC,CAAC;YACH,KAAK,KAXY,KAAe,OAWrB,CAAK,MAAE,CAAC;gBAAA,CAAM;mBAAK,IAAI,CAAC,CAAC,EAAE,KAAK;gBAAI,CAAS;gBAAE,CAAQ;YAAA,CAAC,EAAE,CAAC;gBACpE,MAAM,EAAE,IAAI;gBACZ,SAAS,EAAE,CAAC;oBACV,MAAM,EAAC,IAAI,EAAE,CAAC;wBACZ,MAAM,IAAI,IAAI,CAAC,QAAQ;oBACzB,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC;YACf,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,2BAA2B,EAAE,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,OAAO,IAAI,KAAK;QACvG,CAAC;QAED,EAAoD,AAApD,kDAAoD;QACpD,EAAE,EAAE,MAAM,CAAC,UAAU,CAAC,CAAG,KACvB,MAAM,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC;QAGvB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;IACjC,CAAC;;;;;;;YCVe,aAAa,GAAb,aAAa;YASP,iBAAiB,GAAjB,iBAAiB;YAyCjB,kBAAkB,GAAlB,kBAAkB;YAwBlB,kBAAkB,GAAlB,kBAAkB;YAiBlB,WAAW,GAAX,WAAW;YAejB,aAAa,GAAb,aAAa;IA7HjB,GAAI,CAAJ,IAAI;IACJ,GAAG,CAAH,GAAG;IACI,GAAQ,CAAR,OAAQ;IAEI,GAAY,CAAZ,UAAY;aAe3B,aAAa,CAAC,IAAiB,EAAE,UAAU,GAAG,KAAK,EAAU,CAAC;QAC5E,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,CAAM,OAAE,CAAE;QACjD,MAAM,CAAC,UAAU,MAAM,GAAG,CAAC,IAAI,IAAI,GAAG;IACxC,CAAC;mBAMqB,iBAAiB,CAAC,OAA4B,GAAG,CAAC,CAAC,EAAiB,CAAC;QACzF,EAAE,EAAE,OAAO,CAAC,KAAK,EAAE,CAAC;YAClB,EAAE,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC;gBAChB,KAAK,CAAC,GAAG,GAAG,aAAa,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,QAAQ,KAAK,CAAO;gBACnE,KAAK,CA/BC,GAAG,CA+BC,IAAI,CAAC,GAAG,EAAE,CAAC;oBAAA,CAAQ;gBAAA,CAAC,EAAE,CAAC;oBAC/B,GAAG,EAAE,CAAC;2BAAI,OAAO,CAAC,GAAG;wBAAE,UAAU,EAAE,OAAO,CAAC,KAAK;oBAAC,CAAC;gBACpD,CAAC;YACH,CAAC,MAnCO,IAAI,CAoCL,IAAI,CAAC,CAAkE;YAG9E,MAAM,CAvCE,IAAI,CAuCA,cAAc,CAAC,CAAY,aAAE,OAAO,CAAC,KAAK;QACxD,CAAC;QAED,EAAE,EAAE,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,EAAE,CAAC;YACzC,EAAE,EAAE,OAAO,CAAC,GAAG,KAAK,CAAU,WAC5B,MAAM,CA5CA,IAAI,CA4CE,OAAO,CACjB,CAAgG;YAIpG,EAAE,GAAG,OAAO,CAAC,QAAQ,KAAK,OAAO,CAAC,QAAQ,EACxC,MAAM,CAlDA,IAAI,CAkDE,IAAI,CAAC,CAAkE;YAGrF,KAAK,CAAC,GAAG,GAAG,aAAa,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,QAAQ,KAAK,CAAO;YACnE,KAAK,CArDG,GAAG,CAqDD,IAAI,CAAC,GAAG,EAAE,CAAC;gBAAA,CAAO;iBAAG,WAAW,EAAE,OAAO,CAAC,QAAQ;YAAE,CAAC,EAAE,CAAC;gBAChE,GAAG,EAAE,CAAC;uBAAI,OAAO,CAAC,GAAG;oBAAE,iBAAiB,EAAE,OAAO,CAAC,QAAQ;gBAAC,CAAC;YAC9D,CAAC;QACH,CAAC;QAzDS,IAAI,CA2DT,IAAI,CAAC,CAA4E;IACxF,CAAC;mBASqB,kBAAkB,GAAkB,CAAC;QACzD,EAAE,EAAE,OAAO,CAAC,QAAQ,KAAK,CAAO,QAC9B,MAAM,CAvEE,IAAI,CAuEA,IAAI,CAAC,CAAsD;QAvE/D,IAAI,CA0ET,IAAI,CAAC,CAAoD;QAE9D,GAAG,CAAC,CAAC;YACH,EAAyE,AAAzE,uEAAyE;YACzE,KAAK,CA7EG,GAAG,CA6ED,IAAI,CAAC,CAAkD;YACjE,KAAK,CA9EG,GAAG,CA8ED,IAAI,CAAC,CAAgD;YAC/D,KAAK,CA/EG,GAAG,CA+ED,IAAI,CAAC,CAAiD;YAChE,KAAK,CAhFG,GAAG,CAgFD,IAAI,CAAC,CAAgB;QACjC,CAAC,CAAC,KAAK,EAAC,CAAC;YAlFC,IAAI,CAmFP,OAAO,CAAC,CAA2F;YAnFhG,IAAI,CAoFP,OAAO,CAAC,CAAqE;QACpF,CAAC;IACH,CAAC;mBAOqB,kBAAkB,CAAC,IAAiB,EAAiB,CAAC;QAC1E,KAAK,CAAC,UAAU,GAAG,aAAa,CAAC,IAAI;QACrC,KAAK,CAAC,MAAM,GAAG,KAAK,KA3FS,UAAY,iBA2FL,IAAI,EAAE,CAAQ;QAClD,KAAK,CAAC,OAAO,GAAG,KAAK,KA5FQ,UAAY,iBA4FJ,IAAI,EAhG/B,IAAI,CAgGkC,QAAQ,IAAI,aAAa,CAAC,IAAI,EAAE,QAAQ,MAAM,CAAQ;QAEtG,EAAE,EAhGe,OAAQ,SAgGd,IAAI,CAAC,MAAM,EAAE,OAAO,MAAM,CAAO,QAAE,CAAC;YAlGrC,IAAI,CAmGP,OAAO,EAAE,wDAAwD,EAAE,MAAM,CAAC,CAAC;YAnGxE,IAAI,CAoGP,OAAO,EACT,wDAAwD,EAAE,UAAU,CAAC,UAAU,EAnGnE,OAAQ,SAmGoE,KAAK,CAAC,MAAM,EAAE,GAAG;QAE9G,CAAC;IACH,CAAC;mBAMqB,WAAW,CAAC,IAAiB,EAAE,KAAY,EAAE,CAAC;QAClE,GAAG,CAAC,CAAC;YACH,KAAK,CAAC,kBAAkB,CAAC,IAAI;QAC/B,CAAC,CAAC,KAAK,EAAC,CAAC;QACP,EAA2B,AAA3B,yBAA2B;QAC7B,CAAC;QAnHS,IAAI,CAqHT,SAAS,CAAC,KAAK;IACtB,CAAC;aAOe,aAAa,CAAC,MAA2B,EAAE,CAAC;QAC1D,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc,EAC5B,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI;QAG7B,MAAM,CAAC,MAAM;IACf,CAAC;;;;;;QC1HqB,WAAW,GAAX,WAAW;AAT+B,GAAe,CAAf,KAAe;AAEvD,GAAY,CAAZ,QAAY;AACL,GAAa,CAAb,SAAa;AAChC,GAAK,CAAL,KAAK;AAEjB,EAAiC,AAAjC,+BAAiC;AAFrB,KAAK,CAGX,aAAa,CAAC,WAAW;eAET,WAAW,GAAkB,CAAC;IAClD,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC,CAAU;IAC/C,KAAK,CAAC,UAAU,GAAG,KAAK,CAAC,UAAU,CAAC,CAAS;IAE7C,KAAK,KAbyD,KAAe,QAajE,CAAwC,6CAT1C,KAAK,CAUP,iBAAiB,CAAC,CAAC;YACvB,GAAG,EAAE,WAAW,GAAG,CAAU,YAAG,UAAU,GAAG,CAAS,WAAG,SAAS;YAClE,KAAK,MAhBqD,KAAe,WAgBzD,CAAO,WAAK,SAAS;YACrC,QAAQ,MAjBkD,KAAe,WAiBtD,CAAU,cAAK,SAAS;YAC3C,QAAQ,MAlBkD,KAAe,WAkBtD,CAAU,cAAK,SAAS;QAC7C,CAAC;;IAGH,EAAE,OAtB4D,KAAe,WAsB/D,CAAgB,wBAtBgC,KAAe,kBAsB1B,CAAgB,qBAAM,KAAK,EAC5E,KAAK,KAvBuD,KAAe,QAuB/D,CAAiD,sDAnBrD,KAAK,CAmB8D,kBAAkB;;AAEjG,CAAC;eAEc,UAAU,CAAC,IAAuB,EAA0B,CAAC;IAC1E,KAAK,CAAC,SAAS,GAxBL,KAAK,CAwBS,aAAa,CAAC,IAAI;IAC1C,KAAK,CAAC,YAAY,OA7B4C,KAAe,cA6B5C,SAAS,CAAC,QAAQ;IACnD,KAAK,CAAC,QAAQ,OA9BgD,KAAe,WA8BnD,CAAU,cAAK,CAAM;IAE/C,EAAE,GAAG,YAAY,EACf,MAAM,KAjCsD,KAAe,QAiC9D,yBAAyB,EAAE,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,wBAAwB;IAGvF,KAAK,CAAC,OAAO,GAAG,KAAK,KAjCQ,SAAa,iBAiCL,IAAI,EAAE,YAAY;IACvD,KAAK,CAAC,KAAK,OArCmD,KAAe,qBAqC5C,SAAS,CAAC,MAAM;IAEjD,GAAG,CAAC,CAAC;QACH,KAAK,CAAC,IAAI,GAAG,KAAK,KAxC0C,KAAe,QAyCzE,KAAK,IACA,WAAW,EAAE,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,qBAAqB,EAAE,QAAQ,MAC7D,WAAW,EAAE,IAAI,CAAC,EAAE,EAAE,OAAO,CAAC,OAAO,EAAE,QAAQ,YAzClC,QAAY,UA2CpB,CAAC;gBACP,QAAQ;gBACR,OAAO;gBACP,KAAK;gBACL,OAAO,EAAE,IAAI;gBACb,QAAQ,MAlD8C,KAAe,cAkD/C,SAAS,CAAC,UAAU,MAAM,SAAS;YAC3D,CAAC;;YAnDuD,KAAe,UAsDnE,IAAI;IACd,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC;QAnDP,KAAK,CAoDP,WAAW,CAAC,IAAI,EAAE,KAAK;IAC/B,CAAC;IAED,MAAM,CAAC,OAAO;AAChB,CAAC"}